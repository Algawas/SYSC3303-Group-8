import java.net.DatagramPacket;
import java.net.SocketAddress;

public class DatagramPacketBuilder {
	
	public static DatagramPacket getReceivalbeDatagram() {
		// returns an empty datagram packet for receiving data.
		byte[] receiveBytes = new byte[NetworkConfig.DATAGRAM_PACKET_MAX_LEN];
		return new DatagramPacket(receiveBytes, receiveBytes.length);
	}
	
	public static DatagramPacket getDATADatagram(short blockNumber, byte[] data, SocketAddress returnAddress) {
		/**
		* Returns a data packet datagram
		*
		* @return Current stuff's value.
		*/
		
		byte[] dataBytes = new byte[4 + data.length];
		
		short opCode = 3;
		dataBytes[0] = (byte)(opCode & 0xff);
		dataBytes[1] = (byte)((opCode >> 8) & 0xff);
		
		dataBytes[2] = (byte)(blockNumber & 0xff);
		dataBytes[3] = (byte)((blockNumber >> 8) & 0xff);
		
		int c = 5;
		for (int i = 0; i < data.length; i++) {
			dataBytes[c] = data[i];
			c++;
		}
		
		return new DatagramPacket(dataBytes, dataBytes.length, returnAddress);
	}
	
	public static DatagramPacket getACKDatagram(short blockNumber, SocketAddress returnAddress) {
		byte[] dataBytes = new byte[4];
		
		short opCode = 4;
		dataBytes[0] = (byte)(opCode & 0xff);
		dataBytes[1] = (byte)((opCode >> 8) & 0xff);
		
		dataBytes[2] = (byte)(blockNumber & 0xff);
		dataBytes[3] = (byte)((blockNumber >> 8) & 0xff);
		

		return new DatagramPacket(dataBytes, dataBytes.length, returnAddress);
	}
}
